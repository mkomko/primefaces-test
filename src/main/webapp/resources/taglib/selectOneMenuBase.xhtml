<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:cc="http://xmlns.jcp.org/jsf/composite"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:tst="http://at.test.test/jsf-taglib"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:o="http://omnifaces.org/ui"
                xmlns:jsf="http://xmlns.jcp.org/jsf">

    <!--@elvariable id="value" type="java.lang.Object"-->
    <!--@elvariable id="selectItems" type="java.util.List"-->
    <!--@elvariable id="itemLabel" type="java.lang.String"-->
    <!--@elvariable id="required" type="java.lang.Boolean"-->
    <!--@elvariable id="updateOnChange" type="java.lang.String"-->

    <o:tagAttribute name="value"
                    default=""/>
    <o:tagAttribute name="selectItems"
                    default=""/>
    <o:tagAttribute name="itemLabel"
                    default=""/>
    <o:tagAttribute name="required"
                    default=""/>
    <o:tagAttribute name="updateOnChange"
                    default=""/>

    <div>
        <p:selectOneMenu id="items"
                         converter="omnifaces.SelectItemsIndexConverter"
                         value="#{value}"
                         required="#{required}">
            <f:selectItems value="#{selectItems}"
                           var="i"
                           itemLabel="#{i[itemLabel]}"/>
            <p:ajax event="change"
                    update="#{updateOnChange}"/>
        </p:selectOneMenu>
    </div>

    <p:messages>
        <p:autoUpdate/>
    </p:messages>

</ui:composition>
